"use strict";(self.webpackChunknutrition=self.webpackChunknutrition||[]).push([[902],{2902:function(e,n,t){t.r(n),t.d(n,{default:function(){return he}});var a=t(4165),r=t(5861),i=t(885),s="_recipesList_cardsListBox__zhn-s",o="_recipesList_cardsList__RkbzL",c="_recipesList_card__T-M9i",l="_recipesList_thumb__9wLxc",u="_recipesList_h3__eGpkn",d="_recipesList_calories__SMqkO",_="_recipesList_image__ezuhr",m="_recipesList_calendarBtn__cQ6Ae",h="_recipesList_checkbox__7Fypt",p="_recipesList_label__XIMB3",f="_recipesList_liked__7SZUp",x="_recipesList_checkbox__input__CoaIy",b=t(2791),v=t(5984),j=t(8687),k=t(2993),N=t(7467),g=t(4922),L=t(2982),w=t(6605),F=t(7586),Z=(t(4676),t(4879),t(5257),t(4432),t(5880),"_modal_buttonClose__IRXzw"),y="_modal_swiper__69tSG",C="_modal_slide__SJZ+2",S="_modal_image__WVhky",T="_modal_card__content__gGjKH",M="_modal_buttonsBox__BOUrS",I="_modal_buttonsBox__btn__tawpm",B="_modal_spanBox__lddcf",W="_modal_h3__43XXq",E="_modal_h4__baKms",q="_modal_ingredients_list__FkYF1",R="_modal_nutrients_list__eneVi",A="_modal_ingredientsList__item__eKANl",P="_modal_nutrientsList__item__OZGTD",z="_modal_labels_list__p+q9S",O="_modal_labelsList__item__VkErk",$="_modal_sourceLink__lStzX",D="_modal_notLiked__sy9I8",U="_modal_liked__qSxMg",H="_modal_checkbox__vtzPk",X="_modal_label__uIhqZ",G="_modal_checkbox__input__hfU3n",K=t(5223),J=t(184);var V=(0,j.$j)(null,(function(e){return{addRecipeToWishList:function(n){return e((0,N.Mp)(n))},deleteFromWishlist:function(n){return e((0,N.$$)(n))}}}))((function(e){var n=e.onClose,t=e.recipes,a=e.index,r=e.addRecipeToWishList,s=e.deleteFromWishlist,o=(0,b.useState)(!1),c=(0,i.Z)(o,2),l=c[0],u=c[1];return(0,J.jsx)(F.tq,{pagination:{type:"fraction"},navigation:!0,rewind:!0,modules:[w.tl,w.W_,w.N1],effect:"fade",className:y,keyboard:{enabled:!0,onlyInViewport:!1,pageUpDown:!0},initialSlide:a,hideonclick:"true",children:t.map((function(e){var t=e.images.REGULAR;return(0,J.jsx)(F.o5,{children:(0,J.jsxs)("div",{className:C,id:"slide",children:[(0,J.jsx)("button",{type:"button",onClick:function(e){return n(e)},id:"closeModal-button",className:Z,children:(0,J.jsx)(K.Z,{name:"icon__close"})}),(0,J.jsx)("img",{src:t.url,width:t.width,height:t.height,alt:e.recipeLabel,className:S}),(0,J.jsxs)("div",{className:T,children:[(0,J.jsxs)("div",{className:H,children:[(0,J.jsx)("input",{type:"checkbox",id:"liked",name:"liked",className:"".concat(G," ").concat(e.liked?U:null),onClick:function(){return e.liked?s(e.recipeId):r(e)}}),(0,J.jsx)("label",{htmlFor:"liked",className:"".concat(X,"  ").concat(e.liked?U:D),children:(0,J.jsx)(K.Z,{name:"icon__like"})})]}),(0,J.jsx)("h3",{className:W,children:e.recipeLabel}),(0,J.jsx)("h4",{className:E,children:l?"Nutrients:":"Ingredients:"}),l?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("ul",{className:R,children:e.totalNutrients.map((function(e){return(0,J.jsxs)("li",{className:P,children:[(0,J.jsx)("span",{children:e.label}),(0,J.jsxs)("span",{children:[Number(e.quantity).toFixed(0)," ",e.unit]})]},(0,v.x0)())}))}),(0,J.jsx)("ul",{className:z,children:[].concat((0,L.Z)(e.dietLabels),(0,L.Z)(e.healthLabels)).map((function(e){return(0,J.jsx)("li",{className:O,children:e},e)}))})]}):(0,J.jsx)("ul",{className:q,children:e.ingredientList.map((function(e){return(0,J.jsx)("li",{className:A,children:e},(0,v.x0)())}))})]}),(0,J.jsxs)("div",{className:B,children:[(0,J.jsx)("span",{children:"".concat(Math.round(e.calories)," kcal.")}),(0,J.jsx)("span",{children:"".concat(Math.round(e.totalWeight)," g.")}),(0,J.jsx)("span",{children:"".concat(e.cuisineType," cuisine")}),0!==e.totalTime?(0,J.jsx)("span",{children:"".concat(e.totalTime," min.")}):null]}),(0,J.jsxs)("div",{className:M,children:[(0,J.jsx)("button",{type:"button",className:I,onClick:function(){return u(!l)},children:l?"Show ingredients":"Show nutrients"}),(0,J.jsxs)("a",{href:e.sourceUrl,className:$,children:["Source: ",e.source]})]})]})},(0,v.x0)())}))})})),Q=t(1413),Y=["Breakfast","Lunch","Dinner","Snack","Teatime"],ee=t(7845),ne=t(6700),te=t(6478),ae=t(41),re=t(6571),ie=t(955),se=t(3329),oe={modalWindow:"_plannerForm_modalWindow__IoObN",swiper:"_plannerForm_swiper__z8ccs",form:"_plannerForm_form__dgK-d",box:"_plannerForm_box__jeFS5",dateBox:"_plannerForm_dateBox__xeO4T",mealBox:"_plannerForm_mealBox__4D+MH",label:"_plannerForm_label__9ano4",dateInput:"_plannerForm_dateInput__PoxnP",dropdownMenu:"_plannerForm_dropdownMenu__PJTEC",select:"_plannerForm_select__32xDq",option:"_plannerForm_option__ythXH",date:"_plannerForm_date__qr1vC",box1:"_plannerForm_box1__OIjWo",buttonClose:"_plannerForm_buttonClose__z7QLs",button_submit:"_plannerForm_button_submit__G3Jvs"},ce=t(2426),le=t.n(ce),ue=t(6599),de=t.n(ue),_e=(t(9293),{text:"You forgot to choose meal type or date",className:"info",stopOnFocus:!0,duration:3e3,style:{background:"rgba(154, 22, 46, 0.725)"}});ne.mM.create({fadeIn:{animationName:ee.Ji,animationDuration:"3s"},fadeOut:{animationName:ee.U6,animationDuration:"3s"}});var me=(0,j.$j)((function(e){return{recipesList:(0,k.q)(e)}}),(function(e){return{addToPlanner:function(n){return e((0,te.yf)(n))}}}))((function(e){var n=e.onClose,t=e.addToPlanner,a=e.index,r=e.recipesList,s=(0,b.useState)(""),o=(0,i.Z)(s,2),c=o[0],l=o[1],u=(0,b.useState)(["Choose meal"]),d=(0,i.Z)(u,2),_=d[0],m=d[1],h=function(e){if(e.preventDefault(),"Choose meal"!==_[0])if(""!==c){var n=le()(c).format("LL");t({uri:r[a].uri,date:n,meal:_[0],recipe:r[a]})}else de()(_e).showToast();else de()(_e).showToast()};return(0,J.jsx)(F.tq,{className:oe.swiper,children:(0,J.jsx)(F.o5,{children:(0,J.jsxs)("div",{className:oe.modalWindow,children:[(0,J.jsx)("button",{type:"button",onClick:function(e){return n(e)},id:"closeForm-button",className:oe.buttonClose,children:(0,J.jsx)(K.Z,{name:"icon__close"})}),(0,J.jsxs)("form",{className:oe.form,onSubmit:function(e){return h(e)},children:[(0,J.jsxs)("div",{className:oe.dateBox,children:[(0,J.jsx)("label",{htmlFor:"date",className:oe.label,children:"Date:"}),(0,J.jsx)(re._,{dateAdapter:ae.H,children:(0,J.jsx)(se.Z,{className:oe.box1,children:(0,J.jsx)(ie.M,{label:"Custom input",value:c,onChange:function(e){l(e)},className:oe.datePicker,renderInput:function(e){var n=e.inputRef,t=e.inputProps,a=e.InputProps;return(0,J.jsxs)(se.Z,{className:oe.date,sx:{display:"flex",alignItems:"center"},children:[(0,J.jsx)("input",(0,Q.Z)((0,Q.Z)({ref:n},t),{},{className:oe.dateInput,required:!0,id:"date"})),null===a||void 0===a?void 0:a.endAdornment]})}})})})]}),(0,J.jsxs)("div",{className:oe.mealBox,children:[(0,J.jsx)("label",{htmlFor:"meal",className:oe.label,children:"Meal:"}),(0,J.jsxs)("div",{className:oe.dropdownMenu,children:[(0,J.jsx)("h3",{className:oe.menuTitle,children:_}),(0,J.jsx)("select",{multiple:!0,value:_,name:"meal",id:"meal",onChange:function(e){return m([e.target.value])},className:oe.select,children:Y.map((function(e){return(0,J.jsx)("option",{className:oe.option,name:e,value:e,children:e},e)}))})]})]}),(0,J.jsx)("button",{onClick:function(e){return h(e)},className:oe.button_submit,children:"Add"})]})]})})})}));var he=(0,j.$j)((function(e){return{recipesList:(0,k.q)(e)}}),(function(e){return{addRecipeToWishList:function(n){return e((0,N.Mp)(n))},deleteFromWishlist:function(n){return e((0,N.$$)(n))},fetchNextPage:function(){return e((0,g.F)())}}}))((function(e){var n=e.recipesList,t=e.addRecipeToWishList,j=e.deleteFromWishlist,k=e.fetchNextPage,N=function(){var e=(0,b.useState)(!1),n=(0,i.Z)(e,2),t=n[0],a=n[1];(0,b.useEffect)((function(){return!0===t?window.addEventListener("keydown",r):!1===t?window.removeEventListener("keydown",r):void 0}),[t]);var r=function(e){if(27!==e.keyCode)return"closeModal-button"===e.currentTarget.id?a(!1):void 0;a(!1)};return[t,a]}(),g=(0,i.Z)(N,2),L=g[0],w=g[1],F=(0,b.useState)(0),Z=(0,i.Z)(F,2),y=Z[0],C=Z[1],S=function(){var e=(0,b.useState)(!1),n=(0,i.Z)(e,2),t=n[0],a=n[1];(0,b.useEffect)((function(){return!0===t?window.addEventListener("keydown",r):!1===t?window.removeEventListener("keydown",r):void 0}),[t]);var r=function(e){if(27!==e.keyCode)return"closeForm-button"===e.currentTarget.id?a(!1):void 0;a(!1)};return[t,a]}(),T=(0,i.Z)(S,2),M=T[0],I=T[1],B=(0,b.useState)(!1),W=(0,i.Z)(B,2),E=W[0],q=W[1],R=(0,b.useRef)(null);(0,b.useEffect)((function(){function e(){return(e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=5;break}return e.next=3,k();case 3:return e.next=5,q(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[E]),(0,b.useEffect)((function(){var e=R.current;return e.addEventListener("scroll",P),function(){e.removeEventListener("scroll",P)}}),[]);var A=function(e){return"closeForm-button"===e.currentTarget.id?I(!1):"closeModal-button"===e.currentTarget.id?w(!1):void 0},P=function(e){R.current.scrollHeight-(R.current.scrollTop+window.innerHeight)<100&&q(!0)};return(0,J.jsxs)(J.Fragment,{children:[M?(0,J.jsx)(me,{onClose:A,index:y}):null,L?(0,J.jsx)(V,{index:y,onClose:A,recipes:n}):null,(0,J.jsx)("div",{className:s,hidden:L,children:(0,J.jsx)("ul",{className:o,ref:R,children:n.map((function(e,n){return(0,J.jsxs)("li",{className:c,onClick:function(e){return function(e,n){"path"!==e.target.localName&&"svg"!==e.target.localName&&"input"!==e.target.localName&&"button"!==e.target.localName&&(C(n),w(!0))}(e,n)},children:[(0,J.jsx)("img",{src:e.images.SMALL.url,width:e.images.SMALL.width,height:e.images.SMALL.height,alt:e.recipeLabel,className:_}),(0,J.jsxs)("div",{className:l,children:[(0,J.jsx)("h3",{className:u,children:e.recipeLabel}),(0,J.jsxs)("p",{className:d,children:[Math.round(e.calories)," kcal."]})]}),(0,J.jsxs)("div",{className:h,children:[(0,J.jsx)("input",{type:"checkbox",id:"liked",name:"liked",className:x,onClick:function(){return e.liked?j({uri:e.uri}):t({uri:e.uri})}}),(0,J.jsx)("label",{htmlFor:"liked",className:"".concat(p," ").concat(e.liked?f:null),children:(0,J.jsx)(K.Z,{name:"icon__like"})})]}),(0,J.jsx)("button",{className:m,name:"calendar-button",type:"button",onClick:function(){C(n),I(!0)},children:(0,J.jsx)(K.Z,{name:"icon__calendar"})})]},(0,v.x0)())}))})})]})}))},6478:function(e,n,t){t.d(n,{H3:function(){return u},tH:function(){return d},yf:function(){return l}});var a=t(2388),r=t(6599),i=t.n(r),s=(t(9293),t(476));a.Z.defaults.baseURL="https://nutritionapp-1-t7373772.deta.app/api";var o={text:"Recipe added to planner",className:"success",stopOnFocus:!0,autoClose:5e3,style:{background:"rgba(154, 22, 46, 0.725)"}},c=function(e){a.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(e){return function(n,t){var r=t().auth.token;if(r)return c(r),n((0,s.Gm)()),a.Z.post("/planner/addItem",e).then((function(e){var t=e.data;return n((0,s.dX)(t)),i()(o).showToast(),n(s.dX)})).catch((function(e){return console.log(e)}))}},u=function(e){return function(n,t){var r=t().auth.token;r&&(c(r),n((0,s.vA)()),a.Z.delete("/planner/removeItem",{data:e}).then((function(e){var t=e.data;return n((0,s.f0)(t))})).catch((function(e){return console.log(e)})))}},d=function(){return function(e,n){var t=n().auth.token;if(t)return c(t),e(s.gB),a.Z.get("/planner/getPlannerList").then((function(n){var t=n.data;e((0,s.sI)(t))})).catch((function(e){return console.log("Error>>>",e)}))}}},7467:function(e,n,t){t.d(n,{$$:function(){return u},BW:function(){return d},Mp:function(){return l}});var a=t(2388),r=t(5949),i=t(6599),s=t.n(i),o=(t(9293),{text:"The recipe is already on the wishlist",className:"error",stopOnFocus:!0,autoClose:5e3,style:{background:"rgba(154, 22, 46, 0.725)"}});a.Z.defaults.baseURL="https://nutritionapp-1-t7373772.deta.app/api";var c=function(e){a.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(e){return function(n,t){var i=t().auth.token;if(i)return c(i),console.log("Request body",e),n((0,r.f$)()),a.Z.post("/wishlist/addtowishlist",e).then((function(e){var t=e.data;n((0,r.Ag)(t))})).catch((function(e){return s()(o).showToast()}))}},u=function(e){var n=e.uri;return function(e,t){var i=t().auth.token;i&&(c(i),e((0,r.nk)()),a.Z.delete("/wishlist/removeItem",{data:{uri:n}}).then((function(n){var t=n.data;return e((0,r.dC)(t))})).catch((function(e){return console.log(e)})))}},d=function(){return function(e,n){var t=n().auth.token;if(t)return c(t),e(r.xu),a.Z.get("/wishlist").then((function(n){var t=n.data;e((0,r.IK)(t))})).catch((function(e){return console.log("Error>>>",e)}))}}}}]);
//# sourceMappingURL=902.4db2433d.chunk.js.map