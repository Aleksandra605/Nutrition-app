"use strict";(self.webpackChunknutrition=self.webpackChunknutrition||[]).push([[902],{2902:function(e,n,t){t.r(n),t.d(n,{default:function(){return me}});var r=t(4165),a=t(5861),i=t(885),o="_recipesList_cardsListBox__zhn-s",s="_recipesList_cardsList__RkbzL",c="_recipesList_card__T-M9i",l="_recipesList_thumb__9wLxc",u="_recipesList_h3__eGpkn",d="_recipesList_calories__SMqkO",_="_recipesList_image__ezuhr",m="_recipesList_calendarBtn__cQ6Ae",h="_recipesList_checkbox__7Fypt",p="_recipesList_label__XIMB3",f="_recipesList_liked__7SZUp",x="_recipesList_checkbox__input__CoaIy",b=t(2791),v=t(5984),j=t(8687),g=t(2993),k=t(244),N=t(4922),w=t(2982),L=t(6605),F=t(7586),Z=(t(4676),t(4879),t(5257),t(4432),t(5880),"_modal_buttonClose__IRXzw"),y="_modal_swiper__69tSG",C="_modal_slide__SJZ+2",S="_modal_image__WVhky",T="_modal_card__content__gGjKH",M="_modal_buttonsBox__BOUrS",I="_modal_buttonsBox__btn__tawpm",B="_modal_spanBox__lddcf",R="_modal_h3__43XXq",W="_modal_h4__baKms",q="_modal_ingredients_list__FkYF1",E="_modal_nutrients_list__eneVi",A="_modal_ingredientsList__item__eKANl",P="_modal_nutrientsList__item__OZGTD",O="_modal_labels_list__p+q9S",z="_modal_labelsList__item__VkErk",$="_modal_sourceLink__lStzX",D="_modal_checkbox__vtzPk",U="_modal_label__uIhqZ",H="_modal_liked__qSxMg",X="_modal_checkbox__input__hfU3n",G=t(5223),K=t(184);var J=(0,j.$j)((function(e){return{recipes:(0,g.q)(e)}}),(function(e){return{addRecipeToWishList:function(n){return e((0,k.Mp)(n))},deleteFromWishlist:function(n){return e((0,k.$$)(n))}}}))((function(e){var n=e.onClose,t=e.recipes,r=e.index,a=e.addRecipeToWishList,o=e.deleteFromWishlist,s=(0,b.useState)(!1),c=(0,i.Z)(s,2),l=c[0],u=c[1];return(0,K.jsx)(F.tq,{pagination:{type:"fraction"},navigation:!0,rewind:!0,modules:[L.tl,L.W_,L.N1],effect:"fade",className:y,keyboard:{enabled:!0,onlyInViewport:!1,pageUpDown:!0},initialSlide:r,hideonclick:"true",children:t.map((function(e){var t=e.images.REGULAR;return(0,K.jsx)(F.o5,{children:(0,K.jsxs)("div",{className:C,id:"slide",children:[(0,K.jsx)("button",{type:"button",onClick:function(e){return n(e)},id:"closeModal-button",className:Z,children:(0,K.jsx)(G.Z,{name:"icon__close"})}),(0,K.jsx)("img",{src:t.url,width:t.width,height:t.height,alt:e.recipeLabel,className:S}),(0,K.jsxs)("div",{className:T,children:[(0,K.jsxs)("div",{className:D,children:[(0,K.jsx)("input",{type:"checkbox",id:"liked",name:"liked",className:"".concat(X," "),onClick:function(n){return console.log("event>>>",n),e.liked?o({uri:e.uri}):a({uri:e.uri})}}),(0,K.jsx)("label",{htmlFor:"liked",className:"".concat(U,"  ").concat(e.liked?H:null),children:(0,K.jsx)(G.Z,{name:"icon__like"})})]}),(0,K.jsx)("h3",{className:R,children:e.recipeLabel}),(0,K.jsx)("h4",{className:W,children:l?"Nutrients:":"Ingredients:"}),l?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("ul",{className:E,children:e.totalNutrients.map((function(e){return(0,K.jsxs)("li",{className:P,children:[(0,K.jsx)("span",{children:e.label}),(0,K.jsxs)("span",{children:[Number(e.quantity).toFixed(0)," ",e.unit]})]},(0,v.x0)())}))}),(0,K.jsx)("ul",{className:O,children:[].concat((0,w.Z)(e.dietLabels),(0,w.Z)(e.healthLabels)).map((function(e){return(0,K.jsx)("li",{className:z,children:e},e)}))})]}):(0,K.jsx)("ul",{className:q,children:e.ingredientList.map((function(e){return(0,K.jsx)("li",{className:A,children:e},(0,v.x0)())}))})]}),(0,K.jsxs)("div",{className:B,children:[(0,K.jsx)("span",{children:"".concat(Math.round(e.calories)," kcal.")}),(0,K.jsx)("span",{children:"".concat(Math.round(e.totalWeight)," g.")}),(0,K.jsx)("span",{children:"".concat(e.cuisineType," cuisine")}),0!==e.totalTime?(0,K.jsx)("span",{children:"".concat(e.totalTime," min.")}):null]}),(0,K.jsxs)("div",{className:M,children:[(0,K.jsx)("button",{type:"button",className:I,onClick:function(){return u(!l)},children:l?"Show ingredients":"Show nutrients"}),(0,K.jsxs)("a",{href:e.sourceUrl,className:$,children:["Source: ",e.source]})]})]})},(0,v.x0)())}))})})),V=t(1413),Q=["Breakfast","Lunch","Dinner","Snack","Teatime"],Y=t(7845),ee=t(6700),ne=t(6478),te=t(41),re=t(6571),ae=t(955),ie=t(3329),oe={modalWindow:"_plannerForm_modalWindow__IoObN",swiper:"_plannerForm_swiper__z8ccs",form:"_plannerForm_form__dgK-d",box:"_plannerForm_box__jeFS5",dateBox:"_plannerForm_dateBox__xeO4T",mealBox:"_plannerForm_mealBox__4D+MH",label:"_plannerForm_label__9ano4",dateInput:"_plannerForm_dateInput__PoxnP",dropdownMenu:"_plannerForm_dropdownMenu__PJTEC",select:"_plannerForm_select__32xDq",option:"_plannerForm_option__ythXH",date:"_plannerForm_date__qr1vC",box1:"_plannerForm_box1__OIjWo",buttonClose:"_plannerForm_buttonClose__z7QLs",button_submit:"_plannerForm_button_submit__G3Jvs"},se=t(2426),ce=t.n(se),le=t(6599),ue=t.n(le),de=(t(9293),{text:"You forgot to choose meal type or date",className:"info",stopOnFocus:!0,duration:3e3,style:{background:"rgba(154, 22, 46, 0.725)"}});ee.mM.create({fadeIn:{animationName:Y.Ji,animationDuration:"3s"},fadeOut:{animationName:Y.U6,animationDuration:"3s"}});var _e=(0,j.$j)((function(e){return{recipesList:(0,g.q)(e)}}),(function(e){return{addToPlanner:function(n){return e((0,ne.yf)(n))}}}))((function(e){var n=e.onClose,t=e.addToPlanner,r=e.index,a=e.recipesList,o=(0,b.useState)(""),s=(0,i.Z)(o,2),c=s[0],l=s[1],u=(0,b.useState)(["Choose meal"]),d=(0,i.Z)(u,2),_=d[0],m=d[1],h=function(e){if(e.preventDefault(),"Choose meal"!==_[0])if(""!==c){var n=ce()(c).format("LL");t({uri:a[r].uri,date:n,meal:_[0],recipe:a[r]})}else ue()(de).showToast();else ue()(de).showToast()};return(0,K.jsx)(F.tq,{className:oe.swiper,children:(0,K.jsx)(F.o5,{children:(0,K.jsxs)("div",{className:oe.modalWindow,children:[(0,K.jsx)("button",{type:"button",onClick:function(e){return n(e)},id:"closeForm-button",className:oe.buttonClose,children:(0,K.jsx)(G.Z,{name:"icon__close"})}),(0,K.jsxs)("form",{className:oe.form,onSubmit:function(e){return h(e)},children:[(0,K.jsxs)("div",{className:oe.dateBox,children:[(0,K.jsx)("label",{htmlFor:"date",className:oe.label,children:"Date:"}),(0,K.jsx)(re._,{dateAdapter:te.H,children:(0,K.jsx)(ie.Z,{className:oe.box1,children:(0,K.jsx)(ae.M,{label:"Custom input",value:c,onChange:function(e){l(e)},className:oe.datePicker,renderInput:function(e){var n=e.inputRef,t=e.inputProps,r=e.InputProps;return(0,K.jsxs)(ie.Z,{className:oe.date,sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)("input",(0,V.Z)((0,V.Z)({ref:n},t),{},{className:oe.dateInput,required:!0,id:"date"})),null===r||void 0===r?void 0:r.endAdornment]})}})})})]}),(0,K.jsxs)("div",{className:oe.mealBox,children:[(0,K.jsx)("label",{htmlFor:"meal",className:oe.label,children:"Meal:"}),(0,K.jsxs)("div",{className:oe.dropdownMenu,children:[(0,K.jsx)("h3",{className:oe.menuTitle,children:_}),(0,K.jsx)("select",{multiple:!0,value:_,name:"meal",id:"meal",onChange:function(e){return m([e.target.value])},className:oe.select,children:Q.map((function(e){return(0,K.jsx)("option",{className:oe.option,name:e,value:e,children:e},e)}))})]})]}),(0,K.jsx)("button",{onClick:function(e){return h(e)},className:oe.button_submit,children:"Add"})]})]})})})}));var me=(0,j.$j)((function(e){return{recipesList:(0,g.q)(e)}}),(function(e){return{addRecipeToWishList:function(n){return e((0,k.Mp)(n))},deleteFromWishlist:function(n){return e((0,k.$$)(n))},fetchNextPage:function(){return e((0,N.F)())}}}))((function(e){var n=e.recipesList,t=e.addRecipeToWishList,j=e.deleteFromWishlist,g=e.fetchNextPage,k=function(){var e=(0,b.useState)(!1),n=(0,i.Z)(e,2),t=n[0],r=n[1];(0,b.useEffect)((function(){return!0===t?window.addEventListener("keydown",a):!1===t?window.removeEventListener("keydown",a):void 0}),[t]);var a=function(e){if(27!==e.keyCode)return"closeModal-button"===e.currentTarget.id?r(!1):void 0;r(!1)};return[t,r]}(),N=(0,i.Z)(k,2),w=N[0],L=N[1],F=(0,b.useState)(0),Z=(0,i.Z)(F,2),y=Z[0],C=Z[1],S=function(){var e=(0,b.useState)(!1),n=(0,i.Z)(e,2),t=n[0],r=n[1];(0,b.useEffect)((function(){return!0===t?window.addEventListener("keydown",a):!1===t?window.removeEventListener("keydown",a):void 0}),[t]);var a=function(e){if(27!==e.keyCode)return"closeForm-button"===e.currentTarget.id?r(!1):void 0;r(!1)};return[t,r]}(),T=(0,i.Z)(S,2),M=T[0],I=T[1],B=(0,b.useState)(!1),R=(0,i.Z)(B,2),W=R[0],q=R[1],E=(0,b.useRef)(null);(0,b.useEffect)((function(){function e(){return(e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=5;break}return e.next=3,g();case 3:return e.next=5,q(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[W]),(0,b.useEffect)((function(){var e=E.current;return e.addEventListener("scroll",P),function(){e.removeEventListener("scroll",P)}}),[]);var A=function(e){return"closeForm-button"===e.currentTarget.id?I(!1):"closeModal-button"===e.currentTarget.id?L(!1):void 0},P=function(e){E.current.scrollHeight-(E.current.scrollTop+window.innerHeight)<100&&q(!0)};return(0,K.jsxs)(K.Fragment,{children:[M?(0,K.jsx)(_e,{onClose:A,index:y}):null,w?(0,K.jsx)(J,{index:y,onClose:A}):null,(0,K.jsx)("div",{className:o,hidden:w,children:(0,K.jsx)("ul",{className:s,ref:E,children:n.map((function(e,n){return(0,K.jsxs)("li",{className:c,onClick:function(e){return function(e,n){"path"!==e.target.localName&&"svg"!==e.target.localName&&"input"!==e.target.localName&&"button"!==e.target.localName&&(C(n),L(!0))}(e,n)},children:[(0,K.jsx)("img",{src:e.images.SMALL.url,width:e.images.SMALL.width,height:e.images.SMALL.height,alt:e.recipeLabel,className:_}),(0,K.jsxs)("div",{className:l,children:[(0,K.jsx)("h3",{className:u,children:e.recipeLabel}),(0,K.jsxs)("p",{className:d,children:[Math.round(e.calories)," kcal."]})]}),(0,K.jsxs)("div",{className:h,children:[(0,K.jsx)("input",{type:"checkbox",id:"liked",name:"liked",className:x,onClick:function(n){return console.log("event>>>",n),e.liked?j({uri:e.uri}):t({uri:e.uri})}}),(0,K.jsx)("label",{htmlFor:"liked",className:"".concat(p," ").concat(e.liked?f:null),children:(0,K.jsx)(G.Z,{name:"icon__like"})})]}),(0,K.jsx)("button",{className:m,name:"calendar-button",type:"button",onClick:function(){C(n),I(!0)},children:(0,K.jsx)(G.Z,{name:"icon__calendar"})})]},(0,v.x0)())}))})})]})}))},6478:function(e,n,t){t.d(n,{H3:function(){return u},tH:function(){return d},yf:function(){return l}});var r=t(2388),a=t(6599),i=t.n(a),o=(t(9293),t(476));r.Z.defaults.baseURL="https://nutritionapp-1-t7373772.deta.app/api";var s={text:"Recipe added to planner",className:"success",stopOnFocus:!0,autoClose:5e3,style:{background:"rgba(154, 22, 46, 0.725)"}},c=function(e){r.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(e){return function(n,t){var a=t().auth.token;if(a)return c(a),n((0,o.Gm)()),r.Z.post("/planner/addItem",e).then((function(e){var t=e.data;return n((0,o.dX)(t)),i()(s).showToast(),n(o.dX)})).catch((function(e){return console.log(e)}))}},u=function(e){return function(n,t){var a=t().auth.token;a&&(c(a),n((0,o.vA)()),r.Z.delete("/planner/removeItem",{data:e}).then((function(e){var t=e.data;return n((0,o.f0)(t))})).catch((function(e){return console.log(e)})))}},d=function(){return function(e,n){var t=n().auth.token;if(t)return c(t),e(o.gB),r.Z.get("/planner/getPlannerList").then((function(n){var t=n.data;e((0,o.sI)(t))})).catch((function(e){return console.log("Error>>>",e)}))}}},244:function(e,n,t){t.d(n,{Mp:function(){return l},$$:function(){return u},BW:function(){return d}});var r=t(2388),a=t(5949),i=t(6599),o=t.n(i);t(9293);var s=function(e,n){switch(e){case"error":return{text:n,className:"error",stopOnFocus:!0,autoClose:9e3,style:{background:"rgba(255, 255, 255, 0.3)",backdropFilter:"blur(20px)",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 6px",color:"rgb(36, 36, 36)",borderRadius:"30px"}};case"info":return{text:n,className:"info",stopOnFocus:!0,autoClose:9e3,style:{background:"rgba(197, 252, 34, 0.4)",backdropFilter:"blur(20px)",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 6px",color:"rgb(36, 36, 36)",borderRadius:"30px"}}}};r.Z.defaults.baseURL="https://nutritionapp-1-t7373772.deta.app/api";var c=function(e){r.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(e){return function(n,t){var i=t().auth.token;if(i)return c(i),console.log("Request body",e),n((0,a.f$)()),r.Z.post("/wishlist/addtowishlist",e).then((function(e){var t=e.data;n((0,a.Ag)(t)),o()(s("info","Recipe added to wishlist.")).showToast()})).catch((function(e){n((0,a.fv)()),o()(s("error",e.message)).showToast()}))}},u=function(e){var n=e.uri;return function(e,t){var i=t().auth.token;i&&(c(i),e((0,a.nk)()),r.Z.delete("/wishlist/removeItem",{data:{uri:n}}).then((function(n){var t=n.data;e((0,a.dC)(t)),o()(s("info","Recipe removed from wishlist.")).showToast()})).catch((function(e){return o()(s("error",e.message)).showToast()})))}},d=function(){return function(e,n){var t=n().auth.token;if(t)return c(t),e(a.xu),r.Z.get("/wishlist").then((function(n){var t=n.data;e((0,a.IK)(t))})).catch((function(e){return console.log("Error>>>",e)}))}}}}]);
//# sourceMappingURL=902.e2c55552.chunk.js.map