{"version":3,"file":"static/js/637.dd836ab6.chunk.js","mappings":"gLAAMA,EAAkB,SAACC,GAAK,OAAKA,EAAMC,YAAa,E,UCCtD,EAA0B,+BAA1B,EAAgE,4BAAhE,EAAmG,4BAAnG,EAAuI,6BAAvI,EAA4K,6B,SCoC5K,IAUA,GAAeC,EAAAA,EAAAA,KAVS,SAACF,GAAK,MAAM,CAClCC,aAAcF,EAAgBC,GAC/B,IAE0B,SAACG,GAAQ,MAAM,CACxCC,oBAAqB,WACnB,OAAOD,GAASE,EAAAA,EAAAA,MAClB,EACD,GAED,EAxCA,SAAsB,GAAwC,IAAtCJ,EAAY,EAAZA,aAAcG,EAAmB,EAAnBA,oBAC9BE,GAAgBC,EAAAA,EAAAA,SAAO,GAS7B,OAPAC,EAAAA,EAAAA,YAAU,WACJF,EAAcG,UAChBL,IACAE,EAAcG,SAAU,EAE5B,GAAG,CAACH,KAGF,oBAASI,UAAWC,EAAU,SAC3BV,IAAiB,IAChB,yCAEA,eAAIS,UAAWC,EAAQC,GAAG,YAAW,SAClCX,EAAaY,KAAI,SAACC,GAAO,OACxB,gBAAyBJ,UAAWC,EAAO,WACzC,kBAAOI,KAAK,WAAWH,GAAIE,EAAQE,OAAQN,UAAWC,KACtD,kBAAOM,QAASH,EAAQE,OAAQN,UAAWC,EAAQ,SAChDG,EAAQI,SAHJJ,EAAQE,OAKZ,OAMjB,G,wGCxBAG,EAAAA,EAAAA,SAAAA,QAAyB,+CAEzB,IAAMC,EACD,SAACA,GACFD,EAAAA,EAAAA,SAAAA,QAAAA,OAAAA,cAA2C,iBAAaC,EAC1D,EAMIC,EAAoB,SAACC,GAAI,OAAK,SAACnB,GAGnC,OAFAA,GAASoB,EAAAA,EAAAA,OAEFJ,EAAAA,EAAAA,KACC,kCAAmCG,GACxCE,MAAK,YAAe,IAAZF,EAAI,EAAJA,KACPnB,GAASsB,EAAAA,EAAAA,IAAyBH,GACpC,IACCI,OAAM,SAACC,GAAK,OAAKC,QAAQC,IAAI,yBAA0BF,EAAM,GAClE,CAAE,EAWItB,EAAoB,WAAH,OAAS,SAACF,EAAU2B,GACzC,IACiBC,EACbD,IADFE,KAAQZ,MAGV,GAAKW,EAOL,OAHAX,EAAUW,GACV5B,EAAS8B,EAAAA,IAEFd,EAAAA,EAAAA,IACA,iCACJK,MAAK,YAAe,IAAZF,EAAI,EAAJA,KACPnB,GAAS+B,EAAAA,EAAAA,IAAyBZ,GACpC,IACCI,OAAM,SAACC,GAAK,OAAKC,QAAQC,IAAI,WAAYF,EAAM,GACpD,CAAE,C","sources":["redux/food/food-selectors.js","webpack://nutrition/./src/components/shoppingList/_shoppingList.module.scss?949a","components/shoppingList/ShoppingList.js","redux/food/food-operations.js"],"sourcesContent":["const getShoppingList = (state) => state.shoppingList;\r\n\r\nexport { getShoppingList };\r\n","// extracted by mini-css-extract-plugin\nexport default {\"section\":\"_shoppingList_section__w9yeW\",\"list\":\"_shoppingList_list__tOhHJ\",\"item\":\"_shoppingList_item__NmQC4\",\"label\":\"_shoppingList_label__5+rU6\",\"input\":\"_shoppingList_input__lMdFc\",\"check-01\":\"_shoppingList_check-01__WtM25\",\"check-02\":\"_shoppingList_check-02__oH-Lj\",\"move\":\"_shoppingList_move__syuYd\",\"slice\":\"_shoppingList_slice__SMbra\",\"firework\":\"_shoppingList_firework__8udfm\"};","import { useRef, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getShoppingList } from '../../redux/food/food-selectors';\r\nimport { fetchShoppingList } from '../../redux/food/food-operations';\r\n\r\nimport s from './_shoppingList.module.scss';\r\n\r\nfunction ShoppingList({ shoppingList, toFetchShoppingList }) {\r\n  const isFirstRender = useRef(true);\r\n\r\n  useEffect(() => {\r\n    if (isFirstRender.current) {\r\n      toFetchShoppingList();\r\n      isFirstRender.current = false;\r\n    }\r\n  }, [isFirstRender]);\r\n\r\n  return (\r\n    <section className={s.section}>\r\n      {shoppingList === [] ? (\r\n        <p>Just wait...</p>\r\n      ) : (\r\n        <ul className={s.list} id=\"checklist\">\r\n          {shoppingList.map((product) => (\r\n            <li key={product.foodId} className={s.item}>\r\n              <input type=\"checkbox\" id={product.foodId} className={s.input} />\r\n              <label htmlFor={product.foodId} className={s.label}>\r\n                {product.food}\r\n              </label>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  shoppingList: getShoppingList(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  toFetchShoppingList: () => {\r\n    return dispatch(fetchShoppingList());\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingList);\r\n","import axios from 'axios';\r\n\r\nimport {\r\n  addToShoppingListRequest,\r\n  addToShoppingListSuccess,\r\n  removeFromShoppingListRequest,\r\n  removeFromShoppingListSuccess,\r\n  fetchShoppingListRequest,\r\n  fetchShoppingListSuccess,\r\n} from './food-actions';\r\n\r\naxios.defaults.baseURL = 'https://nutritionapp-1-t7373772.deta.app/api';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nconst addToShoppingList = (data) => (dispatch) => {\r\n  dispatch(addToShoppingListRequest());\r\n\r\n  return axios\r\n    .post('/shoppingList/addToShoppingList', data)\r\n    .then(({ data }) => {\r\n      dispatch(addToShoppingListSuccess(data));\r\n    })\r\n    .catch((error) => console.log('Error from request >>>', error));\r\n};\r\n\r\nconst removeFromShoppingList = (id) => (dispatch) => {\r\n  dispatch(removeFromShoppingListRequest());\r\n\r\n  axios\r\n    .delete(`/shoppingList/${id}`)\r\n    .then(({ data }) => dispatch(removeFromShoppingListSuccess(data)))\r\n    .catch((error) => console.log(error));\r\n};\r\n\r\nconst fetchShoppingList = () => (dispatch, getState) => {\r\n  const {\r\n    auth: { token: persistedToken },\r\n  } = getState();\r\n\r\n  if (!persistedToken) {\r\n    return;\r\n  }\r\n\r\n  token.set(persistedToken);\r\n  dispatch(fetchShoppingListRequest);\r\n\r\n  return axios\r\n    .get('/shoppingList/getShoppingList')\r\n    .then(({ data }) => {\r\n      dispatch(fetchShoppingListSuccess(data));\r\n    })\r\n    .catch((error) => console.log('Error>>>', error));\r\n};\r\n\r\nexport { addToShoppingList, removeFromShoppingList, fetchShoppingList };\r\n"],"names":["getShoppingList","state","shoppingList","connect","dispatch","toFetchShoppingList","fetchShoppingList","isFirstRender","useRef","useEffect","current","className","s","id","map","product","type","foodId","htmlFor","food","axios","token","addToShoppingList","data","addToShoppingListRequest","then","addToShoppingListSuccess","catch","error","console","log","getState","persistedToken","auth","fetchShoppingListRequest","fetchShoppingListSuccess"],"sourceRoot":""}